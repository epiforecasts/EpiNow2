<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estimate Realtime Case Counts and Time-varying Epidemiological Parameters  â€¢ EpiNow2</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Estimate Realtime Case Counts and Time-varying Epidemiological Parameters ">
<meta property="og:description" content="To identify changes in the reproduction number, rate of spread, 
             and doubling time during the course of outbreaks whilst accounting 
             for potential biases due to delays in case reporting.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">EpiNow2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
<li>
  <a href="reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/epiforecasts/EpiNow2">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="epinow2-estimate-realtime-case-counts-and-time-varying-epidemiological-parameters" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#epinow2-estimate-realtime-case-counts-and-time-varying-epidemiological-parameters" class="anchor"></a>EpiNow2: Estimate realtime case counts and time-varying epidemiological parameters</h1></div>

<p><em>This package is under development with breaking changes likely.</em></p>
<p>This package estimates the time-varying reproduction number, rate of spread, and doubling time using a range of open-source tools and current best practices. It aims to help users avoid some of the limitations of naive implementations in a framework that is informed by community feedback and is under active development. It assumes that only limited data is available on cases by date of onset and instead uses cases by date of report. These are then imputed to case counts by date of infection using an uncertain reporting delay and incubation period via a Gaussian process based method. Right truncation of cases is dealt with internally by <code>{EpiNow2}</code>, as is propogating uncertainty from all inputs into the final parameter estimates (helping to mitigate spurious findings). Time-varying estimates of the reproduction number are estimated using a similar approach to that implemented in the <a href="https://github.com/annecori/EpiEstim"><code>{EpiEstim}</code></a> package by date of infection with a generation time estimate that includes uncertainty and variation over time controlled using a Gaussian process. Time-varying estimates of the rate of growth are derived from the time-varying reproduction estimates and the uncertain generation time. Optionally, the time-varying reproduction number can be forecast forwards in time using an integration with the <a href="https://epiforecasts.io/EpiSoon"><code>{EpiSoon}</code></a> package and converted to a case forecast using the renewal equation. Alternatively, the time-varying reproduction number and cases can be forecast using a Gaussian process. See the <a href="https://epiforecasts.io/covid/methods.html">methods</a> section of our Covid-19 site for a detailed discussion of the approach.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the stable version of the package using <a href="https://epiforecasts.io/drat/"><code>{drat}</code></a>:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"drat"</span>)
<span class="kw pkg">drat</span><span class="kw ns">:::</span><span class="fu">add</span>(<span class="st">"epiforecasts"</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"EpiNow2"</span>)</pre></div>
<p>Install the development version of the package with:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"epiforecasts/EpiNow2"</span>)</pre></div>
<p>Windows users will need a working installation of Rtools in order to build the package from source. See <a href="https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started#checking-the-c-toolchain">here</a> for a guide to installing Rtools for use with Stan (which is the statistical modeling platform used for the underlying model). For simple deployment/development a prebuilt docker image is also available (see documentation <a href="https://github.com/epiforecasts/EpiNow2/wiki/Docker">here</a>).</p>
</div>
<div id="quick-start" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-start" class="anchor"></a>Quick start</h2>
<p><code>{EpiNow}</code> is designed to be used with a single function call or to be used in an ad-hoc fashion via individual function calls. In the following section we give an overview of the simple use case. For more on using each function see the <a href="https://epiforecasts.io/EpiNow2/reference/index.html">function documentation</a>. The core functions are: <a href="https://epiforecasts.io/EpiNow2/reference/epinow.html"><code>epinow</code></a>, <a href="https://epiforecasts.io/EpiNow2/reference/epinow.html"><code>regional_epinow</code></a>, <a href="https://epiforecasts.io/EpiNow2/reference/estimate_infections.html"><code>estimate_infections</code></a>, and <a href="https://epiforecasts.io/EpiNow2/reference/forecast_infections.html"><code>forecast_infections</code></a>. A working implementation for COVID-19 can be found <a href="https://github.com/epiforecasts/covid-global/blob/master/update_nowcasts.R">here</a>.</p>
<div id="reporting-delays-incubation-period-and-generation-time" class="section level3">
<h3 class="hasAnchor">
<a href="#reporting-delays-incubation-period-and-generation-time" class="anchor"></a>Reporting delays, incubation period and generation time</h3>
<p>Distributions can either be fitted using package functionality or determined elsewhere and then defined with uncertainty for use in <code>{EpiNow2}</code>. When data is supplied a subsampled bootstrapped lognormal will be fit (to account for uncertainty in the observed data without being biased by changes in incidence).</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="no">reporting_delay</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="fu"><a href="reference/bootstrapped_dist_fit.html">bootstrapped_dist_fit</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html">rlnorm</a></span>(<span class="fl">100</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="fl">6</span>), <span class="fl">1</span>))
<span class="co">## Set max allowed delay to 60 days to truncate computation</span>
<span class="no">reporting_delay</span>$<span class="no">max</span> <span class="kw">&lt;-</span> <span class="fl">60</span>

<span class="no">reporting_delay</span>
<span class="co">#&gt; $mean</span>
<span class="co">#&gt; [1] 1.387786</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $mean_sd</span>
<span class="co">#&gt; [1] 0.1530942</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $sd</span>
<span class="co">#&gt; [1] 1.166175</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $sd_sd</span>
<span class="co">#&gt; [1] 0.124649</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $max</span>
<span class="co">#&gt; [1] 60</span></pre></div>
<p>Here we define the incubation period and generation time based on literature estimates for Covid-19 (see <a href="https://github.com/epiforecasts/EpiNow/tree/master/data-raw">here</a> for the code that generates these estimates).</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="no">generation_time</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mean</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_generation_times.html">covid_generation_times</a></span>[<span class="fl">1</span>, ]$<span class="no">mean</span>,
                        <span class="kw">mean_sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_generation_times.html">covid_generation_times</a></span>[<span class="fl">1</span>, ]$<span class="no">mean_sd</span>,
                         <span class="kw">sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_generation_times.html">covid_generation_times</a></span>[<span class="fl">1</span>, ]$<span class="no">sd</span>,
                         <span class="kw">sd_sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_generation_times.html">covid_generation_times</a></span>[<span class="fl">1</span>, ]$<span class="no">sd_sd</span>,
                         <span class="kw">max</span> <span class="kw">=</span> <span class="fl">30</span>)

<span class="no">incubation_period</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mean</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_incubation_period.html">covid_incubation_period</a></span>[<span class="fl">1</span>, ]$<span class="no">mean</span>,
                          <span class="kw">mean_sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_incubation_period.html">covid_incubation_period</a></span>[<span class="fl">1</span>, ]$<span class="no">mean_sd</span>,
                          <span class="kw">sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_incubation_period.html">covid_incubation_period</a></span>[<span class="fl">1</span>, ]$<span class="no">sd</span>,
                          <span class="kw">sd_sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_incubation_period.html">covid_incubation_period</a></span>[<span class="fl">1</span>, ]$<span class="no">sd_sd</span>,
                          <span class="kw">max</span> <span class="kw">=</span> <span class="fl">30</span>)</pre></div>
</div>
<div id="epinow" class="section level3">
<h3 class="hasAnchor">
<a href="#epinow" class="anchor"></a><a href="https://epiforecasts.io/EpiNow2/reference/epinow.html">epinow</a>
</h3>
<p>This function represents the core functionality of the package and includes results reporting, plotting and optional saving. It requires a data frame of cases by date of report and the distributions defined above. An additional forecasting mdoule is supported via <code>EpiSoon</code> and companion packages (see documentation for an example).</p>
<p>Load example case data from <code>{EpiNow2}</code>.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="no">reported_cases</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/example_confirmed.html">example_confirmed</a></span>[<span class="fl">1</span>:<span class="fl">40</span>]

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">reported_cases</span>)
<span class="co">#&gt;          date confirm</span>
<span class="co">#&gt; 1: 2020-02-22      14</span>
<span class="co">#&gt; 2: 2020-02-23      62</span>
<span class="co">#&gt; 3: 2020-02-24      53</span>
<span class="co">#&gt; 4: 2020-02-25      97</span>
<span class="co">#&gt; 5: 2020-02-26      93</span>
<span class="co">#&gt; 6: 2020-02-27      78</span></pre></div>
<p>Estimate cases by date of infection, the time-varying reproduction number, the rate of growth and forecast these estimates into the future by 7 days. Summarise the posterior and return a summary table and plots for reporting purposes. If a <code>target_folder</code> is supplied results can be internally saved (with the option to also turn off explicit returning of results).</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="no">estimates</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="fu"><a href="reference/epinow.html">epinow</a></span>(<span class="kw">reported_cases</span> <span class="kw">=</span> <span class="no">reported_cases</span>,
                             <span class="kw">generation_time</span> <span class="kw">=</span> <span class="no">generation_time</span>,
                             <span class="kw">incubation_period</span> <span class="kw">=</span> <span class="no">incubation_period</span>,
                             <span class="kw">reporting_delay</span> <span class="kw">=</span> <span class="no">reporting_delay</span>,
                             <span class="kw">rt_prior</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mean</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">sd</span> <span class="kw">=</span> <span class="fl">1</span>), <span class="kw">horizon</span> <span class="kw">=</span> <span class="fl">7</span>,
                             <span class="kw">samples</span> <span class="kw">=</span> <span class="fl">2000</span>, <span class="kw">warmup</span> <span class="kw">=</span> <span class="fl">500</span>, <span class="kw">cores</span> <span class="kw">=</span> <span class="fl">4</span>,
                             <span class="kw">chains</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">estimates</span>)
<span class="co">#&gt; [1] "estimates"                "estimated_reported_cases"</span>
<span class="co">#&gt; [3] "summary"                  "plots"</span></pre></div>
<p>Both summary measures and posterior samples are returned for all parameters in an easily explored format.</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="no">estimates</span>$<span class="no">estimates</span>
<span class="co">#&gt; $samples</span>
<span class="co">#&gt;           variable          parameter time       date sample    value strat</span>
<span class="co">#&gt;      1: infections imputed_infections    1 2020-02-13      1 0.000000  &lt;NA&gt;</span>
<span class="co">#&gt;      2: infections imputed_infections    2 2020-02-14      1 3.000000  &lt;NA&gt;</span>
<span class="co">#&gt;      3: infections imputed_infections    3 2020-02-15      1 1.000000  &lt;NA&gt;</span>
<span class="co">#&gt;      4: infections imputed_infections    4 2020-02-16      1 1.000000  &lt;NA&gt;</span>
<span class="co">#&gt;      5: infections imputed_infections    5 2020-02-17      1 1.000000  &lt;NA&gt;</span>
<span class="co">#&gt;     ---                                                                    </span>
<span class="co">#&gt; 644052:      gt_sd              gt_sd   NA       &lt;NA&gt;   1996 3.017106  &lt;NA&gt;</span>
<span class="co">#&gt; 644053:      gt_sd              gt_sd   NA       &lt;NA&gt;   1997 3.179745  &lt;NA&gt;</span>
<span class="co">#&gt; 644054:      gt_sd              gt_sd   NA       &lt;NA&gt;   1998 3.160715  &lt;NA&gt;</span>
<span class="co">#&gt; 644055:      gt_sd              gt_sd   NA       &lt;NA&gt;   1999 2.910008  &lt;NA&gt;</span>
<span class="co">#&gt; 644056:      gt_sd              gt_sd   NA       &lt;NA&gt;   2000 3.069040  &lt;NA&gt;</span>
<span class="co">#&gt;             type</span>
<span class="co">#&gt;      1: estimate</span>
<span class="co">#&gt;      2: estimate</span>
<span class="co">#&gt;      3: estimate</span>
<span class="co">#&gt;      4: estimate</span>
<span class="co">#&gt;      5: estimate</span>
<span class="co">#&gt;     ---         </span>
<span class="co">#&gt; 644052:     &lt;NA&gt;</span>
<span class="co">#&gt; 644053:     &lt;NA&gt;</span>
<span class="co">#&gt; 644054:     &lt;NA&gt;</span>
<span class="co">#&gt; 644055:     &lt;NA&gt;</span>
<span class="co">#&gt; 644056:     &lt;NA&gt;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $summarised</span>
<span class="co">#&gt;            date          variable strat     type      bottom          top</span>
<span class="co">#&gt;   1: 2020-02-22                 R  &lt;NA&gt; estimate    1.146918     2.917250</span>
<span class="co">#&gt;   2: 2020-02-23                 R  &lt;NA&gt; estimate    1.217705     2.791583</span>
<span class="co">#&gt;   3: 2020-02-24                 R  &lt;NA&gt; estimate    1.382606     2.751726</span>
<span class="co">#&gt;   4: 2020-02-25                 R  &lt;NA&gt; estimate    1.386299     2.615556</span>
<span class="co">#&gt;   5: 2020-02-26                 R  &lt;NA&gt; estimate    1.468794     2.622165</span>
<span class="co">#&gt;  ---                                                                     </span>
<span class="co">#&gt; 374: 2020-04-04 reported_cases_rt  &lt;NA&gt; forecast 1795.000000  7783.000000</span>
<span class="co">#&gt; 375: 2020-04-05 reported_cases_rt  &lt;NA&gt; forecast 2005.000000 10153.000000</span>
<span class="co">#&gt; 376: 2020-04-06 reported_cases_rt  &lt;NA&gt; forecast 1498.000000  9583.000000</span>
<span class="co">#&gt; 377: 2020-04-07 reported_cases_rt  &lt;NA&gt; forecast 1531.000000 10089.000000</span>
<span class="co">#&gt; 378: 2020-04-08 reported_cases_rt  &lt;NA&gt; forecast 1044.000000  8701.000000</span>
<span class="co">#&gt;            lower       upper      median        mean           sd</span>
<span class="co">#&gt;   1:    1.540641    2.171026    1.932382    2.038973    0.6148886</span>
<span class="co">#&gt;   2:    1.641394    2.214338    1.968551    2.039234    0.5088655</span>
<span class="co">#&gt;   3:    1.651149    2.166174    1.980159    2.033923    0.4336207</span>
<span class="co">#&gt;   4:    1.677256    2.149057    1.989053    2.026158    0.3873871</span>
<span class="co">#&gt;   5:    1.697602    2.133558    1.988337    2.014056    0.3603880</span>
<span class="co">#&gt;  ---                                                             </span>
<span class="co">#&gt; 374: 2975.000000 5166.000000 4614.000000 5046.501500 2277.9064050</span>
<span class="co">#&gt; 375: 3546.000000 6401.000000 5595.500000 6272.373000 3334.1141166</span>
<span class="co">#&gt; 376: 2838.000000 5608.000000 5130.500000 5919.254500 4058.5241614</span>
<span class="co">#&gt; 377: 2441.000000 5179.000000 4628.000000 5679.274000 4725.3473526</span>
<span class="co">#&gt; 378: 2111.000000 4556.000000 3905.500000 5143.104500 6536.9635029</span></pre></div>
<p>Reported cases are returned seperately in order to ease reporting of forecasts and model evaluation.</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="no">estimates</span>$<span class="no">estimated_reported_cases</span>
<span class="co">#&gt; $samples</span>
<span class="co">#&gt;        sample       date cases</span>
<span class="co">#&gt;     1:      1 2020-02-20     4</span>
<span class="co">#&gt;     2:      1 2020-02-21     8</span>
<span class="co">#&gt;     3:      1 2020-02-22    17</span>
<span class="co">#&gt;     4:      1 2020-02-23    38</span>
<span class="co">#&gt;     5:      1 2020-02-24    65</span>
<span class="co">#&gt;    ---                        </span>
<span class="co">#&gt; 87431:   2000 2020-03-28  4079</span>
<span class="co">#&gt; 87432:   2000 2020-03-29  4201</span>
<span class="co">#&gt; 87433:   2000 2020-03-30  3987</span>
<span class="co">#&gt; 87434:   2000 2020-03-31  3602</span>
<span class="co">#&gt; 87435:   2000 2020-04-01  3324</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $summarised</span>
<span class="co">#&gt;           date bottom  top lower upper median         mean          sd</span>
<span class="co">#&gt;  1: 2020-02-13      1    1     1     1    1.0    1.0000000   0.0000000</span>
<span class="co">#&gt;  2: 2020-02-14      1    1     1     1    1.0    0.9090909   0.2942449</span>
<span class="co">#&gt;  3: 2020-02-15      0    1     1     1    1.0    0.8750000   0.3826178</span>
<span class="co">#&gt;  4: 2020-02-16      0    1     1     1    1.0    0.8509317   0.5260939</span>
<span class="co">#&gt;  5: 2020-02-17      0    2     1     1    1.0    0.8761468   0.7414318</span>
<span class="co">#&gt;  6: 2020-02-18      0    2     0     1    1.0    1.0375723   0.9272135</span>
<span class="co">#&gt;  7: 2020-02-19      0    3     0     1    1.0    1.4255319   1.2431599</span>
<span class="co">#&gt;  8: 2020-02-20      0    6     0     2    2.0    2.7878953   2.1326050</span>
<span class="co">#&gt;  9: 2020-02-21      1   12     3     7    6.0    6.8263924   3.8879855</span>
<span class="co">#&gt; 10: 2020-02-22      5   27    11    19   17.0   17.5780000   6.7778231</span>
<span class="co">#&gt; 11: 2020-02-23     18   53    25    39   36.0   37.2565000  11.1925129</span>
<span class="co">#&gt; 12: 2020-02-24     36   88    51    71   64.0   65.3835000  16.1778951</span>
<span class="co">#&gt; 13: 2020-02-25     65  131    76   102   95.0   96.8665000  20.7821950</span>
<span class="co">#&gt; 14: 2020-02-26     81  164   104   137  126.0  127.9685000  26.0228573</span>
<span class="co">#&gt; 15: 2020-02-27    107  206   133   174  158.5  160.4115000  31.6654941</span>
<span class="co">#&gt; 16: 2020-02-28    141  254   160   206  195.0  196.9820000  35.7033477</span>
<span class="co">#&gt; 17: 2020-02-29    175  307   202   258  239.5  243.2585000  42.4412571</span>
<span class="co">#&gt; 18: 2020-03-01    218  386   254   321  298.0  302.9380000  53.5366439</span>
<span class="co">#&gt; 19: 2020-03-02    268  468   320   402  367.0  374.9120000  65.2806636</span>
<span class="co">#&gt; 20: 2020-03-03    340  580   375   471  446.0  454.7275000  76.8491714</span>
<span class="co">#&gt; 21: 2020-03-04    408  684   461   570  535.0  542.4440000  86.9686474</span>
<span class="co">#&gt; 22: 2020-03-05    474  794   554   683  630.0  641.4790000 101.0746833</span>
<span class="co">#&gt; 23: 2020-03-06    576  944   650   803  754.0  762.7140000 116.9926102</span>
<span class="co">#&gt; 24: 2020-03-07    680 1128   796   980  907.0  920.8060000 141.2148086</span>
<span class="co">#&gt; 25: 2020-03-08    849 1399   984  1217 1106.5 1121.3515000 174.5047217</span>
<span class="co">#&gt; 26: 2020-03-09   1004 1668  1151  1427 1344.5 1357.0790000 212.5261924</span>
<span class="co">#&gt; 27: 2020-03-10   1223 2017  1437  1749 1599.5 1616.6520000 253.9112194</span>
<span class="co">#&gt; 28: 2020-03-11   1435 2354  1628  1990 1854.0 1881.5885000 292.1895284</span>
<span class="co">#&gt; 29: 2020-03-12   1637 2669  1829  2243 2112.5 2148.6050000 325.5781174</span>
<span class="co">#&gt; 30: 2020-03-13   1835 2966  2110  2555 2378.0 2419.2565000 358.0400118</span>
<span class="co">#&gt; 31: 2020-03-14   2121 3364  2308  2819 2685.5 2722.3725000 396.4321240</span>
<span class="co">#&gt; 32: 2020-03-15   2367 3789  2637  3204 3036.0 3072.1595000 446.2166814</span>
<span class="co">#&gt; 33: 2020-03-16   2677 4286  3039  3681 3443.5 3485.7730000 501.0032751</span>
<span class="co">#&gt; 34: 2020-03-17   2983 4760  3534  4257 3892.5 3938.1820000 560.6644453</span>
<span class="co">#&gt; 35: 2020-03-18   3385 5301  3913  4686 4352.5 4402.6080000 611.9708363</span>
<span class="co">#&gt; 36: 2020-03-19   3738 5866  4311  5139 4768.0 4823.5075000 660.1882604</span>
<span class="co">#&gt; 37: 2020-03-20   4061 6260  4501  5411 5095.0 5174.1895000 701.6753885</span>
<span class="co">#&gt; 38: 2020-03-21   4248 6536  4700  5648 5365.0 5435.9595000 731.2411987</span>
<span class="co">#&gt; 39: 2020-03-22   4343 6730  4932  5865 5540.5 5604.4970000 742.4349748</span>
<span class="co">#&gt; 40: 2020-03-23   4495 6870  5095  6037 5632.0 5698.3510000 745.8929192</span>
<span class="co">#&gt; 41: 2020-03-24   4547 6919  5116  6028 5667.0 5722.1630000 735.2530639</span>
<span class="co">#&gt; 42: 2020-03-25   4556 6901  5165  6031 5626.5 5686.7415000 719.9537238</span>
<span class="co">#&gt; 43: 2020-03-26   4480 6802  4992  5859 5543.0 5584.2890000 704.5686205</span>
<span class="co">#&gt; 44: 2020-03-27   4313 6547  4968  5830 5392.5 5434.4505000 681.7075863</span>
<span class="co">#&gt; 45: 2020-03-28   4173 6304  4670  5538 5214.0 5250.6655000 666.1448447</span>
<span class="co">#&gt; 46: 2020-03-29   3991 6121  4561  5401 5016.0 5061.2930000 658.9783505</span>
<span class="co">#&gt; 47: 2020-03-30   3788 5935  4306  5154 4847.0 4889.0755000 668.6955366</span>
<span class="co">#&gt; 48: 2020-03-31   3594 5899  4183  5119 4687.5 4766.4740000 730.0227270</span>
<span class="co">#&gt; 49: 2020-04-01   3240 6026  3834  4920 4613.0 4721.7535000 891.0539671</span>
<span class="co">#&gt;           date bottom  top lower upper median         mean          sd</span></pre></div>
<p>A summary table is returned for rapidly understanding the results and for reporting purposes.</p>
<div class="sourceCode" id="cb9"><pre class="r"><span class="no">estimates</span>$<span class="no">summary</span>
<span class="co">#&gt;                                  measure            estimate numeric_estimate</span>
<span class="co">#&gt; 1: New confirmed cases by infection date  4508 (83 -- 17752)     &lt;data.table&gt;</span>
<span class="co">#&gt; 2:        Expected change in daily cases              Unsure             0.49</span>
<span class="co">#&gt; 3:            Effective reproduction no.      1 (0.3 -- 1.8)     &lt;data.table&gt;</span>
<span class="co">#&gt; 4:                        Rate of growth   0 (-0.21 -- 0.22)     &lt;data.table&gt;</span>
<span class="co">#&gt; 5:          Doubling/halving time (days) 194.5 (3.2 -- -3.3)     &lt;data.table&gt;</span></pre></div>
<p>A range of plots are returned (with the single summary plot shown below).</p>
<div class="sourceCode" id="cb10"><pre class="r"><span class="no">estimates</span>$<span class="no">plots</span>$<span class="no">summary</span></pre></div>
<p><img src="reference/figures/unnamed-chunk-11-1.png"><!-- --></p>
</div>
<div id="regional-epinow" class="section level3">
<h3 class="hasAnchor">
<a href="#regional-epinow" class="anchor"></a><a href="https://epiforecasts.io/EpiNow2/reference/regional_epinow.html">Regional epinow</a>
</h3>
<p>This function runs the the <code>epinow</code> function across multiple regions in an efficient manner.</p>
<p>Define cases in multiple regions delineated by the region variable.</p>
<div class="sourceCode" id="cb11"><pre class="r"><span class="no">reported_cases</span> <span class="kw">&lt;-</span> <span class="kw pkg">data.table</span><span class="kw ns">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/rbindlist.html">rbindlist</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
   <span class="kw pkg">data.table</span><span class="kw ns">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span>(<span class="no">reported_cases</span>)[, <span class="no">region</span> <span class="kw">:=</span> <span class="st">"testland"</span>],
   <span class="no">reported_cases</span>[, <span class="no">region</span> <span class="kw">:=</span> <span class="st">"realland"</span>]))

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">reported_cases</span>)
<span class="co">#&gt;          date confirm   region</span>
<span class="co">#&gt; 1: 2020-02-22      14 testland</span>
<span class="co">#&gt; 2: 2020-02-23      62 testland</span>
<span class="co">#&gt; 3: 2020-02-24      53 testland</span>
<span class="co">#&gt; 4: 2020-02-25      97 testland</span>
<span class="co">#&gt; 5: 2020-02-26      93 testland</span>
<span class="co">#&gt; 6: 2020-02-27      78 testland</span></pre></div>
<p>Run the pipeline on each region in turn. The commented code (requires the <code>{future}</code> package) can be used to run regions in parallel.</p>
<div class="sourceCode" id="cb12"><pre class="r"><span class="co">## future::plan("multisession")</span>
<span class="no">estimates</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="fu"><a href="reference/regional_epinow.html">regional_epinow</a></span>(<span class="kw">reported_cases</span> <span class="kw">=</span> <span class="no">reported_cases</span>,
                                      <span class="kw">generation_time</span> <span class="kw">=</span> <span class="no">generation_time</span>,
                                      <span class="kw">incubation_period</span> <span class="kw">=</span> <span class="no">incubation_period</span>,
                                      <span class="kw">reporting_delay</span> <span class="kw">=</span> <span class="no">reporting_delay</span>,
                                      <span class="kw">rt_prior</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mean</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">sd</span> <span class="kw">=</span> <span class="fl">1</span>), <span class="kw">horizon</span> <span class="kw">=</span> <span class="fl">7</span>,
                                      <span class="kw">samples</span> <span class="kw">=</span> <span class="fl">2000</span>, <span class="kw">warmup</span> <span class="kw">=</span> <span class="fl">500</span>, <span class="kw">cores</span> <span class="kw">=</span> <span class="fl">4</span>,
                                      <span class="kw">chains</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p>If the results have been saved to a folder (using <code>target_folder</code>) then the <code>regional_summary</code> function can be used to produce summary output (<em>work in progress</em>).</p>
<p>An example of the summary output can be seen <a href="https://github.com/epiforecasts/covid-uk/tree/master/nowcast/regional-summary">here</a>.</p>
</div>
<div id="reporting-templates" class="section level3">
<h3 class="hasAnchor">
<a href="#reporting-templates" class="anchor"></a>Reporting templates</h3>
<p>Rmarkdown templates are provided in the package (<code>templates</code>) for semi-automated reporting of the estimates. These are currently undocumented but an example integration can be seen <a href="https://github.com/epiforecasts/covid/blob/master/_posts/national/united-kingdom/united-kingdom.Rmd">here</a>. If using these templates to report your results please highlight our <a href="https://epiforecasts.io/covid/">limitations</a> as these are key to understanding our results.</p>
</div>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>File an issue <a href="https://github.com/epiforecasts/EpiNow2/issues">here</a> if you have identified an issue with the package. Please note that due to operational constraints priority will be given to users informing government policy or offering methodological insights. We welcome all contributions, in particular those that improve the approach or the robustness of the code base.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sam Abbott <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8057-8037" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Joel Hellewell <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-2683-0849" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>James Munday <br><small class="roles"> Author </small>  </li>
<li>Robin Thompson <br><small class="roles"> Author </small>  </li>
<li>Sebastian Funk <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/epiforecasts/EpiNow2/actions"><img src="https://github.com/epiforecasts/EpiNow2/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/epiforecasts/EpiNow2?branch=master"><img src="https://codecov.io/gh/epiforecasts/EpiNow2/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/247464257"><img src="https://zenodo.org/badge/247464257.svg" alt="DOI"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Sam Abbott, Joel Hellewell, James Munday, Robin Thompson, Sebastian Funk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
