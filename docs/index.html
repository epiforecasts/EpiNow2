<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estimate Realtime Case Counts and Time-varying Epidemiological Parameters  â€¢ EpiNow2</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Estimate Realtime Case Counts and Time-varying Epidemiological Parameters ">
<meta property="og:description" content="To identify changes in the reproduction number, rate of spread, 
             and doubling time during the course of outbreaks whilst accounting 
             for potential biases due to delays in case reporting.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">EpiNow2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
<li>
  <a href="reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/epiforecasts/EpiNow2">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="epinow2-estimate-realtime-case-counts-and-time-varying-epidemiological-parameters" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#epinow2-estimate-realtime-case-counts-and-time-varying-epidemiological-parameters" class="anchor"></a>EpiNow2: Estimate realtime case counts and time-varying epidemiological parameters</h1></div>

<p><em>This package is under development with breaking changes likely.</em></p>
<p>This package estimates the time-varying reproduction number, rate of spread, and doubling time using a range of open-source tools and current best practices. It aims to help users avoid some of the limitations of naive implementations in a framework that is informed by community feedback and is under active development. It assumes that only limited data is available on cases by date of onset and instead uses cases by date of report. These are then imputed to case counts by date of infection using an uncertain reporting delay and incubation period via a Gaussian process based method. Right truncation of cases is dealt with internally by <code>{EpiNow2}</code>, as is propogating uncertainty from all inputs into the final parameter estimates (helping to mitigate spurious findings). Time-varying estimates of the reproduction number are estimated using a similar approach to that implemented in the <a href="https://github.com/annecori/EpiEstim"><code>{EpiEstim}</code></a> package by date of infection with a generation time estimate that includes uncertainty and variation over time controlled using a Gaussian process. Time-varying estimates of the rate of growth are derived from the time-varying reproduction estimates and the uncertain generation time. Optionally, the time-varying reproduction number can be forecast forwards in time using an integration with the <a href="https://epiforecasts.io/EpiSoon"><code>{EpiSoon}</code></a> package and converted to a case forecast using the renewal equation. Alternatively, the time-varying reproduction number and cases can be forecast using a Gaussian process. See the <a href="https://epiforecasts.io/covid/methods.html">methods</a> section of our Covid-19 site for a detailed discussion of the approach.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the stable version of the package using <a href="https://epiforecasts.io/drat/"><code>{drat}</code></a>:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"drat"</span>)
<span class="kw pkg">drat</span><span class="kw ns">:::</span><span class="fu">add</span>(<span class="st">"epiforecasts"</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"EpiNow2"</span>)</pre></div>
<p>Install the development version of the package with:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"epiforecasts/EpiNow2"</span>)</pre></div>
<p>Windows users will need a working installation of Rtools in order to build the package from source. See <a href="https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started#checking-the-c-toolchain">here</a> for a guide to installing Rtools for use with Stan (which is the statistical modeling platform used for the underlying model). For simple deployment/development a prebuilt docker image is also available (see documentation <a href="https://github.com/epiforecasts/EpiNow2/wiki/Docker">here</a>).</p>
</div>
<div id="quick-start" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-start" class="anchor"></a>Quick start</h2>
<p><code>{EpiNow}</code> is designed to be used with a single function call or to be used in an ad-hoc fashion via individual function calls. In the following section we give an overview of the simple use case. For more on using each function see the <a href="https://epiforecasts.io/EpiNow2/reference/index.html">function documentation</a>. The core functions are: <a href="https://epiforecasts.io/EpiNow2/reference/epinow.html"><code>epinow</code></a>, <a href="https://epiforecasts.io/EpiNow2/reference/epinow.html"><code>regional_epinow</code></a>, <a href="https://epiforecasts.io/EpiNow2/reference/estimate_infections.html"><code>estimate_infections</code></a>, and <a href="https://epiforecasts.io/EpiNow2/reference/forecast_infections.html"><code>forecast_infections</code></a>. A working implementation for COVID-19 can be found <a href="https://github.com/epiforecasts/covid-global/blob/master/update_nowcasts.R">here</a>.</p>
<div id="reporting-delays-incubation-period-and-generation-time" class="section level3">
<h3 class="hasAnchor">
<a href="#reporting-delays-incubation-period-and-generation-time" class="anchor"></a>Reporting delays, incubation period and generation time</h3>
<p>Distributions can either be fitted using package functionality or determined elsewhere and then defined with uncertainty for use in <code>{EpiNow2}</code>. When data is supplied a subsampled bootstrapped lognormal will be fit (to account for uncertainty in the observed data without being biased by changes in incidence).</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="no">reporting_delay</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="fu"><a href="reference/bootstrapped_dist_fit.html">bootstrapped_dist_fit</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html">rlnorm</a></span>(<span class="fl">100</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="fl">6</span>), <span class="fl">1</span>))
<span class="co">## Set max allowed delay to 60 days to truncate computation</span>
<span class="no">reporting_delay</span>$<span class="no">max</span> <span class="kw">&lt;-</span> <span class="fl">60</span>

<span class="no">reporting_delay</span>
<span class="co">#&gt; $mean</span>
<span class="co">#&gt; [1] 1.662454</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $mean_sd</span>
<span class="co">#&gt; [1] 0.1328819</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $sd</span>
<span class="co">#&gt; [1] 0.9682874</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $sd_sd</span>
<span class="co">#&gt; [1] 0.09942634</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $max</span>
<span class="co">#&gt; [1] 60</span></pre></div>
<p>Here we define the incubation period and generation time based on literature estimates for Covid-19 (see <a href="https://github.com/epiforecasts/EpiNow/tree/master/data-raw">here</a> for the code that generates these estimates).</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="no">generation_time</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mean</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_generation_times.html">covid_generation_times</a></span>[<span class="fl">1</span>, ]$<span class="no">mean</span>,
                        <span class="kw">mean_sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_generation_times.html">covid_generation_times</a></span>[<span class="fl">1</span>, ]$<span class="no">mean_sd</span>,
                         <span class="kw">sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_generation_times.html">covid_generation_times</a></span>[<span class="fl">1</span>, ]$<span class="no">sd</span>,
                         <span class="kw">sd_sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_generation_times.html">covid_generation_times</a></span>[<span class="fl">1</span>, ]$<span class="no">sd_sd</span>,
                         <span class="kw">max</span> <span class="kw">=</span> <span class="fl">30</span>)

<span class="no">incubation_period</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mean</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_incubation_period.html">covid_incubation_period</a></span>[<span class="fl">1</span>, ]$<span class="no">mean</span>,
                          <span class="kw">mean_sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_incubation_period.html">covid_incubation_period</a></span>[<span class="fl">1</span>, ]$<span class="no">mean_sd</span>,
                          <span class="kw">sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_incubation_period.html">covid_incubation_period</a></span>[<span class="fl">1</span>, ]$<span class="no">sd</span>,
                          <span class="kw">sd_sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_incubation_period.html">covid_incubation_period</a></span>[<span class="fl">1</span>, ]$<span class="no">sd_sd</span>,
                          <span class="kw">max</span> <span class="kw">=</span> <span class="fl">30</span>)</pre></div>
</div>
<div id="epinow" class="section level3">
<h3 class="hasAnchor">
<a href="#epinow" class="anchor"></a><a href="https://epiforecasts.io/EpiNow2/reference/epinow.html">epinow</a>
</h3>
<p>This function represents the core functionality of the package and includes results reporting, plotting and optional saving. It requires a data frame of cases by date of report and the distributions defined above. An additional forecasting mdoule is supported via <code>EpiSoon</code> and companion packages (see documentation for an example).</p>
<p>Load example case data from <code>{EpiNow2}</code>.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="no">reported_cases</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/example_confirmed.html">example_confirmed</a></span>[<span class="fl">1</span>:<span class="fl">40</span>]

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">reported_cases</span>)
<span class="co">#&gt;          date confirm</span>
<span class="co">#&gt; 1: 2020-02-22      14</span>
<span class="co">#&gt; 2: 2020-02-23      62</span>
<span class="co">#&gt; 3: 2020-02-24      53</span>
<span class="co">#&gt; 4: 2020-02-25      97</span>
<span class="co">#&gt; 5: 2020-02-26      93</span>
<span class="co">#&gt; 6: 2020-02-27      78</span></pre></div>
<p>Estimate cases by date of infection, the time-varying reproduction number, the rate of growth and forecast these estimates into the future by 7 days. Summarise the posterior and return a summary table and plots for reporting purposes. If a <code>target_folder</code> is supplied results can be internally saved (with the option to also turn off explicit returning of results). <em>Note that for real use cases more samples and a longer warm up may be needed</em>.</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="no">estimates</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="fu"><a href="reference/epinow.html">epinow</a></span>(<span class="kw">reported_cases</span> <span class="kw">=</span> <span class="no">reported_cases</span>,
                             <span class="kw">generation_time</span> <span class="kw">=</span> <span class="no">generation_time</span>,
                             <span class="kw">incubation_period</span> <span class="kw">=</span> <span class="no">incubation_period</span>,
                             <span class="kw">reporting_delay</span> <span class="kw">=</span> <span class="no">reporting_delay</span>,
                             <span class="kw">horizon</span> <span class="kw">=</span> <span class="fl">7</span>, <span class="kw">samples</span> <span class="kw">=</span> <span class="fl">1000</span>, <span class="kw">warmup</span> <span class="kw">=</span> <span class="fl">250</span>, <span class="kw">cores</span> <span class="kw">=</span> <span class="fl">4</span>,
                             <span class="kw">chains</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">estimates</span>)
<span class="co">#&gt; [1] "estimates"                "estimated_reported_cases"</span>
<span class="co">#&gt; [3] "summary"                  "plots"</span></pre></div>
<p>Both summary measures and posterior samples are returned for all parameters in an easily explored format.</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="no">estimates</span>$<span class="no">estimates</span>
<span class="co">#&gt; $samples</span>
<span class="co">#&gt;           variable          parameter time       date sample    value strat</span>
<span class="co">#&gt;      1: infections imputed_infections    1 2020-02-12      1 1.000000  &lt;NA&gt;</span>
<span class="co">#&gt;      2: infections imputed_infections    2 2020-02-13      1 0.000000  &lt;NA&gt;</span>
<span class="co">#&gt;      3: infections imputed_infections    3 2020-02-14      1 1.000000  &lt;NA&gt;</span>
<span class="co">#&gt;      4: infections imputed_infections    4 2020-02-15      1 3.000000  &lt;NA&gt;</span>
<span class="co">#&gt;      5: infections imputed_infections    5 2020-02-16      1 3.000000  &lt;NA&gt;</span>
<span class="co">#&gt;     ---                                                                    </span>
<span class="co">#&gt; 325053:      gt_sd              gt_sd   NA       &lt;NA&gt;    996 3.001101  &lt;NA&gt;</span>
<span class="co">#&gt; 325054:      gt_sd              gt_sd   NA       &lt;NA&gt;    997 3.182484  &lt;NA&gt;</span>
<span class="co">#&gt; 325055:      gt_sd              gt_sd   NA       &lt;NA&gt;    998 3.038965  &lt;NA&gt;</span>
<span class="co">#&gt; 325056:      gt_sd              gt_sd   NA       &lt;NA&gt;    999 3.023792  &lt;NA&gt;</span>
<span class="co">#&gt; 325057:      gt_sd              gt_sd   NA       &lt;NA&gt;   1000 2.879233  &lt;NA&gt;</span>
<span class="co">#&gt;             type</span>
<span class="co">#&gt;      1: estimate</span>
<span class="co">#&gt;      2: estimate</span>
<span class="co">#&gt;      3: estimate</span>
<span class="co">#&gt;      4: estimate</span>
<span class="co">#&gt;      5: estimate</span>
<span class="co">#&gt;     ---         </span>
<span class="co">#&gt; 325053:     &lt;NA&gt;</span>
<span class="co">#&gt; 325054:     &lt;NA&gt;</span>
<span class="co">#&gt; 325055:     &lt;NA&gt;</span>
<span class="co">#&gt; 325056:     &lt;NA&gt;</span>
<span class="co">#&gt; 325057:     &lt;NA&gt;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $summarised</span>
<span class="co">#&gt;            date          variable strat     type      bottom          top</span>
<span class="co">#&gt;   1: 2020-02-22                 R  &lt;NA&gt; estimate    1.156754     2.797370</span>
<span class="co">#&gt;   2: 2020-02-23                 R  &lt;NA&gt; estimate    1.296550     2.729608</span>
<span class="co">#&gt;   3: 2020-02-24                 R  &lt;NA&gt; estimate    1.311231     2.543682</span>
<span class="co">#&gt;   4: 2020-02-25                 R  &lt;NA&gt; estimate    1.446166     2.496869</span>
<span class="co">#&gt;   5: 2020-02-26                 R  &lt;NA&gt; estimate    1.522439     2.463755</span>
<span class="co">#&gt;  ---                                                                     </span>
<span class="co">#&gt; 378: 2020-04-04 reported_cases_rt  &lt;NA&gt; forecast 2135.000000  7441.000000</span>
<span class="co">#&gt; 379: 2020-04-05 reported_cases_rt  &lt;NA&gt; forecast 2520.000000 10170.000000</span>
<span class="co">#&gt; 380: 2020-04-06 reported_cases_rt  &lt;NA&gt; forecast 1838.000000  9102.000000</span>
<span class="co">#&gt; 381: 2020-04-07 reported_cases_rt  &lt;NA&gt; forecast 1499.000000  9120.000000</span>
<span class="co">#&gt; 382: 2020-04-08 reported_cases_rt  &lt;NA&gt; forecast 1277.000000  7783.000000</span>
<span class="co">#&gt;            lower       upper      median        mean           sd</span>
<span class="co">#&gt;   1:    1.497166    2.098036    1.962373    2.036219    0.5589665</span>
<span class="co">#&gt;   2:    1.674100    2.202104    1.981915    2.027192    0.4596344</span>
<span class="co">#&gt;   3:    1.652546    2.117968    1.989787    2.015804    0.3826886</span>
<span class="co">#&gt;   4:    1.706090    2.120343    1.994046    2.002998    0.3302092</span>
<span class="co">#&gt;   5:    1.798144    2.179997    1.981706    1.989194    0.3001369</span>
<span class="co">#&gt;  ---                                                             </span>
<span class="co">#&gt; 378: 2860.000000 4943.000000 4414.000000 4815.370000 1973.2458880</span>
<span class="co">#&gt; 379: 3396.000000 6118.000000 5564.500000 6156.496000 2939.0876524</span>
<span class="co">#&gt; 380: 2807.000000 5536.000000 4991.500000 5661.789000 2963.7546278</span>
<span class="co">#&gt; 381: 2807.000000 5442.000000 4597.500000 5348.858000 3180.6970172</span>
<span class="co">#&gt; 382: 2152.000000 4284.000000 3767.000000 4510.149000 3300.7763125</span></pre></div>
<p>Reported cases are returned seperately in order to ease reporting of forecasts and model evaluation.</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="no">estimates</span>$<span class="no">estimated_reported_cases</span>
<span class="co">#&gt; $samples</span>
<span class="co">#&gt;        sample       date cases</span>
<span class="co">#&gt;     1:      1 2020-02-19     1</span>
<span class="co">#&gt;     2:      1 2020-02-20     4</span>
<span class="co">#&gt;     3:      1 2020-02-21     4</span>
<span class="co">#&gt;     4:      1 2020-02-22    16</span>
<span class="co">#&gt;     5:      1 2020-02-23    29</span>
<span class="co">#&gt;    ---                        </span>
<span class="co">#&gt; 44105:   1000 2020-03-28  4558</span>
<span class="co">#&gt; 44106:   1000 2020-03-29  4158</span>
<span class="co">#&gt; 44107:   1000 2020-03-30  4020</span>
<span class="co">#&gt; 44108:   1000 2020-03-31  3906</span>
<span class="co">#&gt; 44109:   1000 2020-04-01  3640</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $summarised</span>
<span class="co">#&gt;           date bottom  top lower upper median         mean          sd</span>
<span class="co">#&gt;  1: 2020-02-12      1    1     1     1    1.0    1.0000000          NA</span>
<span class="co">#&gt;  2: 2020-02-13      0    1     1     1    1.0    0.8888889   0.3333333</span>
<span class="co">#&gt;  3: 2020-02-14      0    1     1     1    1.0    0.7931034   0.4122508</span>
<span class="co">#&gt;  4: 2020-02-15      0    1     1     1    1.0    0.7662338   0.5103173</span>
<span class="co">#&gt;  5: 2020-02-16      0    1     1     1    1.0    0.7582418   0.5916670</span>
<span class="co">#&gt;  6: 2020-02-17      0    2     1     1    1.0    0.9317585   0.7473210</span>
<span class="co">#&gt;  7: 2020-02-18      0    2     0     1    1.0    1.1223140   0.9874618</span>
<span class="co">#&gt;  8: 2020-02-19      0    4     1     2    2.0    1.8586698   1.4549034</span>
<span class="co">#&gt;  9: 2020-02-20      0    7     1     3    3.0    3.6581892   2.3681422</span>
<span class="co">#&gt; 10: 2020-02-21      2   14     4     8    8.0    8.0440000   3.8914274</span>
<span class="co">#&gt; 11: 2020-02-22      6   26    10    18   17.0   17.2440000   6.3678107</span>
<span class="co">#&gt; 12: 2020-02-23     16   48    23    36   33.0   33.5800000   9.9833495</span>
<span class="co">#&gt; 13: 2020-02-24     33   81    47    66   58.0   58.9160000  15.0423807</span>
<span class="co">#&gt; 14: 2020-02-25     54  122    71    98   91.0   92.3830000  20.9684999</span>
<span class="co">#&gt; 15: 2020-02-26     88  173   103   139  131.0  133.1000000  27.0934319</span>
<span class="co">#&gt; 16: 2020-02-27    124  231   143   186  174.0  177.0050000  33.9796349</span>
<span class="co">#&gt; 17: 2020-02-28    154  277   197   246  219.0  221.6140000  39.2536094</span>
<span class="co">#&gt; 18: 2020-02-29    199  337   226   281  263.0  266.3560000  44.3661540</span>
<span class="co">#&gt; 19: 2020-03-01    237  394   267   331  309.0  313.7930000  49.4660797</span>
<span class="co">#&gt; 20: 2020-03-02    275  453   328   401  361.5  363.7840000  56.3115649</span>
<span class="co">#&gt; 21: 2020-03-03    316  521   353   438  421.0  425.3980000  65.0757286</span>
<span class="co">#&gt; 22: 2020-03-04    387  630   437   536  495.0  503.3630000  77.2578022</span>
<span class="co">#&gt; 23: 2020-03-05    470  754   516   638  606.0  612.2960000  93.1009246</span>
<span class="co">#&gt; 24: 2020-03-06    565  923   660   802  750.0  755.4340000 114.9814523</span>
<span class="co">#&gt; 25: 2020-03-07    711 1156   791   973  928.0  938.3250000 141.8219759</span>
<span class="co">#&gt; 26: 2020-03-08    886 1432   991  1215 1140.0 1154.9610000 174.2888869</span>
<span class="co">#&gt; 27: 2020-03-09   1072 1710  1227  1489 1380.5 1397.8530000 202.9293565</span>
<span class="co">#&gt; 28: 2020-03-10   1281 2021  1460  1765 1628.5 1653.2110000 235.2190394</span>
<span class="co">#&gt; 29: 2020-03-11   1498 2310  1707  2050 1897.5 1912.8840000 262.9577177</span>
<span class="co">#&gt; 30: 2020-03-12   1745 2660  1901  2289 2152.0 2173.4500000 292.7500437</span>
<span class="co">#&gt; 31: 2020-03-13   1893 2908  2200  2616 2416.0 2439.8840000 322.9941699</span>
<span class="co">#&gt; 32: 2020-03-14   2184 3334  2435  2893 2705.0 2731.2150000 357.4303418</span>
<span class="co">#&gt; 33: 2020-03-15   2445 3733  2692  3195 3014.0 3052.4130000 402.4753568</span>
<span class="co">#&gt; 34: 2020-03-16   2716 4138  3071  3650 3383.0 3423.0520000 443.2885539</span>
<span class="co">#&gt; 35: 2020-03-17   3050 4634  3320  3979 3817.5 3844.1300000 498.1829457</span>
<span class="co">#&gt; 36: 2020-03-18   3492 5258  3848  4555 4270.0 4300.7580000 555.3512766</span>
<span class="co">#&gt; 37: 2020-03-19   3726 5731  4294  5087 4710.0 4764.7250000 618.6138217</span>
<span class="co">#&gt; 38: 2020-03-20   4155 6326  4713  5557 5156.0 5200.7490000 671.1446484</span>
<span class="co">#&gt; 39: 2020-03-21   4535 6757  5047  5920 5499.0 5549.2820000 693.4248095</span>
<span class="co">#&gt; 40: 2020-03-22   4577 6823  5213  6089 5720.0 5777.6180000 699.3120487</span>
<span class="co">#&gt; 41: 2020-03-23   4723 6911  5298  6163 5808.0 5877.2530000 689.3284781</span>
<span class="co">#&gt; 42: 2020-03-24   4853 6995  5253  6111 5798.5 5858.4620000 671.5710523</span>
<span class="co">#&gt; 43: 2020-03-25   4775 6827  5227  6081 5693.5 5731.6540000 646.7182081</span>
<span class="co">#&gt; 44: 2020-03-26   4531 6548  5002  5834 5508.0 5547.6810000 621.3255046</span>
<span class="co">#&gt; 45: 2020-03-27   4324 6285  4858  5646 5312.5 5337.1550000 599.2072198</span>
<span class="co">#&gt; 46: 2020-03-28   4084 5988  4627  5378 5104.5 5126.4890000 578.8177484</span>
<span class="co">#&gt; 47: 2020-03-29   4043 5931  4429  5186 4917.5 4955.0100000 587.1533112</span>
<span class="co">#&gt; 48: 2020-03-30   3913 5879  4362  5134 4790.0 4838.8380000 633.0311669</span>
<span class="co">#&gt; 49: 2020-03-31   3728 6027  4234  5111 4712.5 4793.4010000 741.4541648</span>
<span class="co">#&gt; 50: 2020-04-01   3338 6115  3989  5070 4692.0 4814.8010000 932.3111130</span>
<span class="co">#&gt;           date bottom  top lower upper median         mean          sd</span></pre></div>
<p>A summary table is returned for rapidly understanding the results and for reporting purposes.</p>
<div class="sourceCode" id="cb9"><pre class="r"><span class="no">estimates</span>$<span class="no">summary</span>
<span class="co">#&gt;                                  measure              estimate numeric_estimate</span>
<span class="co">#&gt; 1: New confirmed cases by infection date    4366 (51 -- 16522)     &lt;data.table&gt;</span>
<span class="co">#&gt; 2:        Expected change in daily cases                Unsure             0.56</span>
<span class="co">#&gt; 3:            Effective reproduction no.      0.9 (0.4 -- 1.6)     &lt;data.table&gt;</span>
<span class="co">#&gt; 4:                        Rate of growth -0.02 (-0.19 -- 0.18)     &lt;data.table&gt;</span>
<span class="co">#&gt; 5:          Doubling/halving time (days)   -38.8 (3.9 -- -3.6)     &lt;data.table&gt;</span></pre></div>
<p>A range of plots are returned (with the single summary plot shown below).</p>
<div class="sourceCode" id="cb10"><pre class="r"><span class="no">estimates</span>$<span class="no">plots</span>$<span class="no">summary</span></pre></div>
<p><img src="reference/figures/unnamed-chunk-11-1.png"><!-- --></p>
</div>
<div id="regional-epinow" class="section level3">
<h3 class="hasAnchor">
<a href="#regional-epinow" class="anchor"></a><a href="https://epiforecasts.io/EpiNow2/reference/regional_epinow.html">Regional epinow</a>
</h3>
<p>This function runs the the <code>epinow</code> function across multiple regions in an efficient manner.</p>
<p>Define cases in multiple regions delineated by the region variable.</p>
<div class="sourceCode" id="cb11"><pre class="r"><span class="no">reported_cases</span> <span class="kw">&lt;-</span> <span class="kw pkg">data.table</span><span class="kw ns">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/rbindlist.html">rbindlist</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
   <span class="kw pkg">data.table</span><span class="kw ns">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span>(<span class="no">reported_cases</span>)[, <span class="no">region</span> <span class="kw">:=</span> <span class="st">"testland"</span>],
   <span class="no">reported_cases</span>[, <span class="no">region</span> <span class="kw">:=</span> <span class="st">"realland"</span>]))

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">reported_cases</span>)
<span class="co">#&gt;          date confirm   region</span>
<span class="co">#&gt; 1: 2020-02-22      14 testland</span>
<span class="co">#&gt; 2: 2020-02-23      62 testland</span>
<span class="co">#&gt; 3: 2020-02-24      53 testland</span>
<span class="co">#&gt; 4: 2020-02-25      97 testland</span>
<span class="co">#&gt; 5: 2020-02-26      93 testland</span>
<span class="co">#&gt; 6: 2020-02-27      78 testland</span></pre></div>
<p>Run the pipeline on each region in turn. The commented code (requires the <code>{future}</code> package) can be used to run regions in parallel.</p>
<div class="sourceCode" id="cb12"><pre class="r"><span class="co">## future::plan("multisession")</span>
<span class="no">estimates</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="fu"><a href="reference/regional_epinow.html">regional_epinow</a></span>(<span class="kw">reported_cases</span> <span class="kw">=</span> <span class="no">reported_cases</span>,
                                      <span class="kw">generation_time</span> <span class="kw">=</span> <span class="no">generation_time</span>,
                                      <span class="kw">incubation_period</span> <span class="kw">=</span> <span class="no">incubation_period</span>,
                                      <span class="kw">reporting_delay</span> <span class="kw">=</span> <span class="no">reporting_delay</span>,
                                      <span class="kw">rt_prior</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mean</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">sd</span> <span class="kw">=</span> <span class="fl">1</span>), <span class="kw">horizon</span> <span class="kw">=</span> <span class="fl">7</span>,
                                      <span class="kw">samples</span> <span class="kw">=</span> <span class="fl">2000</span>, <span class="kw">warmup</span> <span class="kw">=</span> <span class="fl">500</span>, <span class="kw">cores</span> <span class="kw">=</span> <span class="fl">4</span>,
                                      <span class="kw">chains</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p>If the results have been saved to a folder (using <code>target_folder</code>) then the <code>regional_summary</code> function can be used to produce summary output (<em>work in progress</em>).</p>
<p>An example of the summary output can be seen <a href="https://github.com/epiforecasts/covid-uk/tree/master/nowcast/regional-summary">here</a>.</p>
</div>
<div id="reporting-templates" class="section level3">
<h3 class="hasAnchor">
<a href="#reporting-templates" class="anchor"></a>Reporting templates</h3>
<p>Rmarkdown templates are provided in the package (<code>templates</code>) for semi-automated reporting of the estimates. These are currently undocumented but an example integration can be seen <a href="https://github.com/epiforecasts/covid/blob/master/_posts/national/united-kingdom/united-kingdom.Rmd">here</a>. If using these templates to report your results please highlight our <a href="https://epiforecasts.io/covid/">limitations</a> as these are key to understanding our results.</p>
</div>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>File an issue <a href="https://github.com/epiforecasts/EpiNow2/issues">here</a> if you have identified an issue with the package. Please note that due to operational constraints priority will be given to users informing government policy or offering methodological insights. We welcome all contributions, in particular those that improve the approach or the robustness of the code base.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sam Abbott <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8057-8037" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Joel Hellewell <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-2683-0849" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>James Munday <br><small class="roles"> Author </small>  </li>
<li>Robin Thompson <br><small class="roles"> Author </small>  </li>
<li>Sebastian Funk <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/epiforecasts/EpiNow2/actions"><img src="https://github.com/epiforecasts/EpiNow2/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/epiforecasts/EpiNow2?branch=master"><img src="https://codecov.io/gh/epiforecasts/EpiNow2/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/247464257"><img src="https://zenodo.org/badge/247464257.svg" alt="DOI"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Sam Abbott, Joel Hellewell, James Munday, Robin Thompson, Sebastian Funk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
