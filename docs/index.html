<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estimate Realtime Case Counts and Time-varying Epidemiological Parameters  â€¢ EpiNow2</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Estimate Realtime Case Counts and Time-varying Epidemiological Parameters ">
<meta property="og:description" content="To identify changes in the reproduction number, rate of spread, 
             and doubling time during the course of outbreaks whilst accounting 
             for potential biases due to delays in case reporting.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">EpiNow2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
<li>
  <a href="reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/epiforecasts/EpiNow2">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="epinow2-estimate-realtime-case-counts-and-time-varying-epidemiological-parameters" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#epinow2-estimate-realtime-case-counts-and-time-varying-epidemiological-parameters" class="anchor"></a>EpiNow2: Estimate realtime case counts and time-varying epidemiological parameters</h1></div>

<p><em>This package is under development with breaking changes likely.</em></p>
<p>This package estimates the time-varying reproduction number, rate of spread, and doubling time using a range of open-source tools and current best practices. It aims to help users avoid some of the limitations of naive implementations in a framework that is informed by community feedback and is under active development. It assumes that only limited data is available on cases by date of onset and instead uses cases by date of report. These are then imputed to case counts by date of infection using an uncertain reporting delay and incubation period via a Gaussian process based method. Right truncation of cases is dealt with internally by <code>{EpiNow2}</code>, as is propogating uncertainty from all inputs into the final parameter estimates (helping to mitigate spurious findings). Time-varying estimates of the reproduction number are estimated using a similar approach to that implemented in the <a href="https://github.com/annecori/EpiEstim"><code>{EpiEstim}</code></a> package by date of infection with a generation time estimate that includes uncertainty and variation over time controlled using a Gaussian process. Time-varying estimates of the rate of growth are derived from the time-varying reproduction estimates and the uncertain generation time. Optionally, the time-varying reproduction number can be forecast forwards in time using an integration with the <a href="https://epiforecasts.io/EpiSoon"><code>{EpiSoon}</code></a> package and converted to a case forecast using the renewal equation. Alternatively, the time-varying reproduction number and cases can be forecast using a Gaussian process. See the <a href="https://epiforecasts.io/covid/methods.html">methods</a> section of our Covid-19 site for a detailed discussion of the approach.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the stable version of the package using <a href="https://epiforecasts.io/drat/"><code>{drat}</code></a>:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"drat"</span>)
<span class="kw pkg">drat</span><span class="kw ns">:::</span><span class="fu"><a href="https://rdrr.io/pkg/drat/man/addRepo.html">add</a></span>(<span class="st">"epiforecasts"</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"EpiNow2"</span>)</pre></div>
<p>Install the development version of the package with:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"epiforecasts/EpiNow2"</span>)</pre></div>
<p>For simple deployment/development a prebuilt docker image is also available (see documentation <a href="https://github.com/epiforecasts/EpiNow2/wiki/Docker">here</a>).</p>
</div>
<div id="quick-start" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-start" class="anchor"></a>Quick start</h2>
<p><code>{EpiNow}</code> is designed to be used with a single function call or to be used in an ad-hoc fashion via individual function calls. In the following section we give an overview of the simple use case. For more on using each function see the <a href="https://epiforecasts.io/EpiNow2/reference/index.html">function documentation</a>. The core functions are: <a href="https://epiforecasts.io/EpiNow2/reference/epinow.html"><code>epinow</code></a>, <a href="https://epiforecasts.io/EpiNow2/reference/epinow.html"><code>regional_epinow</code></a>, <a href="https://epiforecasts.io/EpiNow2/reference/estimate_infections.html"><code>estimate_infections</code></a>, and <a href="https://epiforecasts.io/EpiNow2/reference/forecast_infections.html"><code>forecast_infections</code></a>. A working implementation for COVID-19 can be found <a href="https://github.com/epiforecasts/covid-global/blob/master/update_nowcasts.R">here</a>.</p>
<div id="reporting-delays-incubation-period-and-generation-time" class="section level3">
<h3 class="hasAnchor">
<a href="#reporting-delays-incubation-period-and-generation-time" class="anchor"></a>Reporting delays, incubation period and generation time</h3>
<p>Distributions can either be fitted using package functionality or determined elsewhere and then defined with uncertainty for use in <code>{EpiNow2}</code>. When data is supplied a subsampled bootstrapped lognormal will be fit (to account for uncertainty in the observed data without being biased by changes in incidence).</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="no">reporting_delay</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="fu"><a href="reference/bootstrapped_dist_fit.html">bootstrapped_dist_fit</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html">rlnorm</a></span>(<span class="fl">100</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="fl">6</span>), <span class="fl">1</span>))
<span class="co">## Set max allowed delay to 60 days to truncate computation</span>
<span class="no">reporting_delay</span>$<span class="no">max</span> <span class="kw">&lt;-</span> <span class="fl">60</span>

<span class="no">reporting_delay</span>
<span class="co">#&gt; $mean</span>
<span class="co">#&gt; [1] 1.648603</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $mean_sd</span>
<span class="co">#&gt; [1] 0.1660936</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $sd</span>
<span class="co">#&gt; [1] 1.171771</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $sd_sd</span>
<span class="co">#&gt; [1] 0.1484032</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $max</span>
<span class="co">#&gt; [1] 60</span></pre></div>
<p>Here we define the incubation period and generation time based on literature estimates for Covid-19 (see <a href="https://github.com/epiforecasts/EpiNow/tree/master/data-raw">here</a> for the code that generates these estimates).</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="no">generation_time</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mean</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_generation_times.html">covid_generation_times</a></span>[<span class="fl">1</span>, ]$<span class="no">mean</span>,
                        <span class="kw">mean_sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_generation_times.html">covid_generation_times</a></span>[<span class="fl">1</span>, ]$<span class="no">mean_sd</span>,
                         <span class="kw">sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_generation_times.html">covid_generation_times</a></span>[<span class="fl">1</span>, ]$<span class="no">sd</span>,
                         <span class="kw">sd_sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_generation_times.html">covid_generation_times</a></span>[<span class="fl">1</span>, ]$<span class="no">sd_sd</span>,
                         <span class="kw">max</span> <span class="kw">=</span> <span class="fl">30</span>)

<span class="no">incubation_period</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mean</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_incubation_period.html">covid_incubation_period</a></span>[<span class="fl">1</span>, ]$<span class="no">mean</span>,
                          <span class="kw">mean_sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_incubation_period.html">covid_incubation_period</a></span>[<span class="fl">1</span>, ]$<span class="no">mean_sd</span>,
                          <span class="kw">sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_incubation_period.html">covid_incubation_period</a></span>[<span class="fl">1</span>, ]$<span class="no">sd</span>,
                          <span class="kw">sd_sd</span> <span class="kw">=</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/covid_incubation_period.html">covid_incubation_period</a></span>[<span class="fl">1</span>, ]$<span class="no">sd_sd</span>,
                          <span class="kw">max</span> <span class="kw">=</span> <span class="fl">30</span>)</pre></div>
</div>
<div id="epinow" class="section level3">
<h3 class="hasAnchor">
<a href="#epinow" class="anchor"></a><a href="https://epiforecasts.io/EpiNow2/reference/epinow.html">epinow</a>
</h3>
<p>This function represents the core functionality of the package and includes results reporting, plotting and optional saving. It requires a data frame of cases by date of report and the distributions defined above. An additional forecasting mdoule is supported via <code>EpiSoon</code> and companion packages (see documentation for an example).</p>
<p>Load example case data from <code>{EpiNow2}</code>.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="no">reported_cases</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="no"><a href="reference/example_confirmed.html">example_confirmed</a></span>[<span class="fl">1</span>:<span class="fl">40</span>]

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">reported_cases</span>)
<span class="co">#&gt;          date confirm</span>
<span class="co">#&gt; 1: 2020-02-22      14</span>
<span class="co">#&gt; 2: 2020-02-23      62</span>
<span class="co">#&gt; 3: 2020-02-24      53</span>
<span class="co">#&gt; 4: 2020-02-25      97</span>
<span class="co">#&gt; 5: 2020-02-26      93</span>
<span class="co">#&gt; 6: 2020-02-27      78</span></pre></div>
<p>Estimate cases by date of infection, the time-varying reproduction number, the rate of growth and forecast these estimates into the future by 7 days. Summarise the posterior and return a summary table and plots for reporting purposes. If a <code>target_folder</code> is supplied results can be internally saved (with the option to also turn off explicit returning of results).</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="no">estimates</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="fu"><a href="reference/epinow.html">epinow</a></span>(<span class="kw">reported_cases</span> <span class="kw">=</span> <span class="no">reported_cases</span>,
                             <span class="kw">generation_time</span> <span class="kw">=</span> <span class="no">generation_time</span>,
                             <span class="kw">incubation_period</span> <span class="kw">=</span> <span class="no">incubation_period</span>,
                             <span class="kw">reporting_delay</span> <span class="kw">=</span> <span class="no">reporting_delay</span>,
                             <span class="kw">rt_prior</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mean</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">sd</span> <span class="kw">=</span> <span class="fl">1</span>), <span class="kw">horizon</span> <span class="kw">=</span> <span class="fl">7</span>,
                             <span class="kw">samples</span> <span class="kw">=</span> <span class="fl">2000</span>, <span class="kw">warmup</span> <span class="kw">=</span> <span class="fl">500</span>, <span class="kw">cores</span> <span class="kw">=</span> <span class="fl">4</span>,
                             <span class="kw">chains</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">estimates</span>)
<span class="co">#&gt; [1] "estimates"                "estimated_reported_cases"</span>
<span class="co">#&gt; [3] "summary"                  "plots"</span></pre></div>
<p>Both summary measures and posterior samples are returned for all parameters in an easily explored format.</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="no">estimates</span>$<span class="no">estimates</span>
<span class="co">#&gt; $samples</span>
<span class="co">#&gt;           variable          parameter time       date sample    value strat</span>
<span class="co">#&gt;      1: infections imputed_infections    1 2020-02-12      1 2.000000  &lt;NA&gt;</span>
<span class="co">#&gt;      2: infections imputed_infections    2 2020-02-13      1 3.000000  &lt;NA&gt;</span>
<span class="co">#&gt;      3: infections imputed_infections    3 2020-02-14      1 5.000000  &lt;NA&gt;</span>
<span class="co">#&gt;      4: infections imputed_infections    4 2020-02-15      1 0.000000  &lt;NA&gt;</span>
<span class="co">#&gt;      5: infections imputed_infections    5 2020-02-16      1 7.000000  &lt;NA&gt;</span>
<span class="co">#&gt;     ---                                                                    </span>
<span class="co">#&gt; 650053:      gt_sd              gt_sd   NA       &lt;NA&gt;   1996 3.122579  &lt;NA&gt;</span>
<span class="co">#&gt; 650054:      gt_sd              gt_sd   NA       &lt;NA&gt;   1997 3.116010  &lt;NA&gt;</span>
<span class="co">#&gt; 650055:      gt_sd              gt_sd   NA       &lt;NA&gt;   1998 3.101795  &lt;NA&gt;</span>
<span class="co">#&gt; 650056:      gt_sd              gt_sd   NA       &lt;NA&gt;   1999 2.894121  &lt;NA&gt;</span>
<span class="co">#&gt; 650057:      gt_sd              gt_sd   NA       &lt;NA&gt;   2000 3.051195  &lt;NA&gt;</span>
<span class="co">#&gt;             type</span>
<span class="co">#&gt;      1: estimate</span>
<span class="co">#&gt;      2: estimate</span>
<span class="co">#&gt;      3: estimate</span>
<span class="co">#&gt;      4: estimate</span>
<span class="co">#&gt;      5: estimate</span>
<span class="co">#&gt;     ---         </span>
<span class="co">#&gt; 650053:     &lt;NA&gt;</span>
<span class="co">#&gt; 650054:     &lt;NA&gt;</span>
<span class="co">#&gt; 650055:     &lt;NA&gt;</span>
<span class="co">#&gt; 650056:     &lt;NA&gt;</span>
<span class="co">#&gt; 650057:     &lt;NA&gt;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $summarised</span>
<span class="co">#&gt;            date          variable strat     type       bottom          top</span>
<span class="co">#&gt;   1: 2020-02-22                 R  &lt;NA&gt; estimate    0.9447286     2.800905</span>
<span class="co">#&gt;   2: 2020-02-23                 R  &lt;NA&gt; estimate    1.1419612     2.802958</span>
<span class="co">#&gt;   3: 2020-02-24                 R  &lt;NA&gt; estimate    1.1819344     2.617406</span>
<span class="co">#&gt;   4: 2020-02-25                 R  &lt;NA&gt; estimate    1.3053191     2.607255</span>
<span class="co">#&gt;   5: 2020-02-26                 R  &lt;NA&gt; estimate    1.2471799     2.485897</span>
<span class="co">#&gt;  ---                                                                      </span>
<span class="co">#&gt; 378: 2020-04-04 reported_cases_rt  &lt;NA&gt; forecast 1792.0000000  8795.000000</span>
<span class="co">#&gt; 379: 2020-04-05 reported_cases_rt  &lt;NA&gt; forecast 1713.0000000 10811.000000</span>
<span class="co">#&gt; 380: 2020-04-06 reported_cases_rt  &lt;NA&gt; forecast 1655.0000000 10985.000000</span>
<span class="co">#&gt; 381: 2020-04-07 reported_cases_rt  &lt;NA&gt; forecast 1094.0000000 10468.000000</span>
<span class="co">#&gt; 382: 2020-04-08 reported_cases_rt  &lt;NA&gt; forecast  973.0000000  9521.000000</span>
<span class="co">#&gt;            lower       upper      median        mean           sd</span>
<span class="co">#&gt;   1:    1.342480    1.978584    1.787757    1.920892 6.664423e-01</span>
<span class="co">#&gt;   2:    1.411726    2.013949    1.821209    1.922828 5.566562e-01</span>
<span class="co">#&gt;   3:    1.442635    1.996374    1.846152    1.919490 4.771371e-01</span>
<span class="co">#&gt;   4:    1.556334    2.070884    1.851773    1.914723 4.298293e-01</span>
<span class="co">#&gt;   5:    1.500422    1.992664    1.856260    1.908789 4.081294e-01</span>
<span class="co">#&gt;  ---                                                             </span>
<span class="co">#&gt; 378: 3059.000000 5678.000000 4875.000000 5383.285000 2.876527e+03</span>
<span class="co">#&gt; 379: 3500.000000 6873.000000 5827.000000 6798.311500 6.264367e+03</span>
<span class="co">#&gt; 380: 2557.000000 5737.000000 5289.500000 6508.368000 7.938064e+03</span>
<span class="co">#&gt; 381: 2143.000000 5299.000000 4810.500000 6556.782000 1.262880e+04</span>
<span class="co">#&gt; 382: 1777.000000 4567.000000 4144.500000 5861.780500 1.328673e+04</span></pre></div>
<p>Reported cases are returned seperately in order to ease reporting of forecasts and model evaluation.</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="no">estimates</span>$<span class="no">estimated_reported_cases</span>
<span class="co">#&gt; $samples</span>
<span class="co">#&gt;        sample       date cases</span>
<span class="co">#&gt;     1:      1 2020-02-18     2</span>
<span class="co">#&gt;     2:      1 2020-02-19     0</span>
<span class="co">#&gt;     3:      1 2020-02-20     3</span>
<span class="co">#&gt;     4:      1 2020-02-21     2</span>
<span class="co">#&gt;     5:      1 2020-02-22     4</span>
<span class="co">#&gt;    ---                        </span>
<span class="co">#&gt; 87680:   2000 2020-03-28  5362</span>
<span class="co">#&gt; 87681:   2000 2020-03-29  4987</span>
<span class="co">#&gt; 87682:   2000 2020-03-30  4685</span>
<span class="co">#&gt; 87683:   2000 2020-03-31  4321</span>
<span class="co">#&gt; 87684:   2000 2020-04-01  3986</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $summarised</span>
<span class="co">#&gt;           date bottom  top lower upper median         mean           sd</span>
<span class="co">#&gt;  1: 2020-02-12      1    1     1     1    1.0    1.0000000    0.0000000</span>
<span class="co">#&gt;  2: 2020-02-13      0    1     1     1    1.0    0.8888889    0.3233808</span>
<span class="co">#&gt;  3: 2020-02-14      0    1     1     1    1.0    0.8095238    0.4346724</span>
<span class="co">#&gt;  4: 2020-02-15      0    1     1     1    1.0    0.7920792    0.5147928</span>
<span class="co">#&gt;  5: 2020-02-16      0    1     1     1    1.0    0.7835052    0.7221387</span>
<span class="co">#&gt;  6: 2020-02-17      0    2     1     1    1.0    0.8326118    0.7056573</span>
<span class="co">#&gt;  7: 2020-02-18      0    2     0     1    1.0    0.9735812    0.9379822</span>
<span class="co">#&gt;  8: 2020-02-19      0    3     0     1    1.0    1.3697595    1.2348308</span>
<span class="co">#&gt;  9: 2020-02-20      0    5     0     2    2.0    2.6497297    2.0621790</span>
<span class="co">#&gt; 10: 2020-02-21      1   12     3     7    6.0    6.5002511    3.8166358</span>
<span class="co">#&gt; 11: 2020-02-22      5   26    10    18   16.0   16.4965000    6.6715997</span>
<span class="co">#&gt; 12: 2020-02-23     16   52    27    41   35.0   35.7705000   11.3956465</span>
<span class="co">#&gt; 13: 2020-02-24     35   88    50    71   62.0   63.8080000   16.8035805</span>
<span class="co">#&gt; 14: 2020-02-25     58  131    75   104   95.0   97.4350000   23.6143514</span>
<span class="co">#&gt; 15: 2020-02-26     84  180   110   146  130.0  133.1170000   30.3460995</span>
<span class="co">#&gt; 16: 2020-02-27    105  221   135   179  166.0  169.2750000   37.2348707</span>
<span class="co">#&gt; 17: 2020-02-28    144  279   171   225  205.0  209.0465000   44.1197078</span>
<span class="co">#&gt; 18: 2020-02-29    176  338   213   278  249.0  254.3480000   50.8898888</span>
<span class="co">#&gt; 19: 2020-03-01    216  409   254   327  305.0  310.9855000   59.9937490</span>
<span class="co">#&gt; 20: 2020-03-02    263  489   312   403  371.0  379.4580000   74.2808593</span>
<span class="co">#&gt; 21: 2020-03-03    314  583   378   484  447.0  456.9735000   87.3186296</span>
<span class="co">#&gt; 22: 2020-03-04    383  711   451   578  535.0  548.2460000  105.0799809</span>
<span class="co">#&gt; 23: 2020-03-05    458  853   543   692  638.0  655.8340000  123.4148494</span>
<span class="co">#&gt; 24: 2020-03-06    534 1002   675   857  772.0  789.1035000  149.2364820</span>
<span class="co">#&gt; 25: 2020-03-07    675 1224   807  1025  933.5  950.5805000  176.1329212</span>
<span class="co">#&gt; 26: 2020-03-08    831 1465   963  1222 1128.0 1147.3395000  206.0434206</span>
<span class="co">#&gt; 27: 2020-03-09    977 1729  1179  1475 1341.0 1371.5885000  238.0406433</span>
<span class="co">#&gt; 28: 2020-03-10   1211 2088  1355  1710 1587.0 1618.5135000  276.1628990</span>
<span class="co">#&gt; 29: 2020-03-11   1354 2353  1563  1971 1847.0 1879.1805000  314.1359158</span>
<span class="co">#&gt; 30: 2020-03-12   1598 2723  1785  2243 2116.5 2154.0400000  356.9061100</span>
<span class="co">#&gt; 31: 2020-03-13   1811 3064  2100  2602 2408.0 2446.5820000  398.9792532</span>
<span class="co">#&gt; 32: 2020-03-14   2039 3460  2419  2983 2731.5 2774.4365000  453.9827763</span>
<span class="co">#&gt; 33: 2020-03-15   2350 3963  2679  3320 3089.0 3137.0950000  513.3199866</span>
<span class="co">#&gt; 34: 2020-03-16   2596 4418  3127  3826 3492.0 3535.3910000  573.3988640</span>
<span class="co">#&gt; 35: 2020-03-17   2876 4867  3448  4203 3908.0 3959.6565000  623.7739001</span>
<span class="co">#&gt; 36: 2020-03-18   3397 5538  3828  4667 4331.0 4393.8750000  676.9036147</span>
<span class="co">#&gt; 37: 2020-03-19   3606 5919  4230  5141 4738.5 4801.8075000  736.4556836</span>
<span class="co">#&gt; 38: 2020-03-20   3861 6350  4468  5433 5079.0 5156.1215000  795.7547553</span>
<span class="co">#&gt; 39: 2020-03-21   4145 6801  4613  5620 5334.0 5431.6060000  838.2746083</span>
<span class="co">#&gt; 40: 2020-03-22   4228 7021  4833  5907 5519.5 5610.0430000  866.4784871</span>
<span class="co">#&gt; 41: 2020-03-23   4248 7052  4958  6062 5622.0 5700.2735000  879.8847659</span>
<span class="co">#&gt; 42: 2020-03-24   4239 7042  4834  5923 5617.0 5702.8245000  872.5393562</span>
<span class="co">#&gt; 43: 2020-03-25   4285 6987  4891  5942 5559.5 5638.7540000  849.1566705</span>
<span class="co">#&gt; 44: 2020-03-26   4213 6856  4738  5766 5452.0 5518.7070000  826.1600174</span>
<span class="co">#&gt; 45: 2020-03-27   4060 6593  4751  5751 5295.5 5359.8690000  796.2403935</span>
<span class="co">#&gt; 46: 2020-03-28   3896 6362  4552  5520 5128.5 5185.5510000  769.1221066</span>
<span class="co">#&gt; 47: 2020-03-29   3784 6280  4346  5298 4951.5 5015.2845000  752.5503070</span>
<span class="co">#&gt; 48: 2020-03-30   3741 6212  4254  5250 4824.5 4869.7730000  767.6077542</span>
<span class="co">#&gt; 49: 2020-03-31   3421 6079  4241  5311 4692.5 4774.9500000  851.1629719</span>
<span class="co">#&gt; 50: 2020-04-01   3130 6276  3817  5035 4628.5 4764.4555000 1050.2817345</span>
<span class="co">#&gt;           date bottom  top lower upper median         mean           sd</span></pre></div>
<p>A summary table is returned for rapidly understanding the results and for reporting purposes.</p>
<div class="sourceCode" id="cb9"><pre class="r"><span class="no">estimates</span>$<span class="no">summary</span>
<span class="co">#&gt;                                  measure             estimate numeric_estimate</span>
<span class="co">#&gt; 1: New confirmed cases by infection date   4424 (27 -- 18797)     &lt;data.table&gt;</span>
<span class="co">#&gt; 2:        Expected change in daily cases               Unsure             0.42</span>
<span class="co">#&gt; 3:            Effective reproduction no.     1.1 (0.3 -- 1.9)     &lt;data.table&gt;</span>
<span class="co">#&gt; 4:                        Rate of growth 0.03 (-0.22 -- 0.24)     &lt;data.table&gt;</span>
<span class="co">#&gt; 5:          Doubling/halving time (days)   26.3 (2.9 -- -3.1)     &lt;data.table&gt;</span></pre></div>
<p>A range of plots are returned (with the single summary plot shown below).</p>
<div class="sourceCode" id="cb10"><pre class="r"><span class="no">estimates</span>$<span class="no">plots</span>$<span class="no">summary</span></pre></div>
<p><img src="reference/figures/unnamed-chunk-11-1.png"><!-- --></p>
</div>
<div id="regional-epinow" class="section level3">
<h3 class="hasAnchor">
<a href="#regional-epinow" class="anchor"></a><a href="https://epiforecasts.io/EpiNow2/reference/regional_epinow.html">Regional epinow</a>
</h3>
<p>This function runs the the <code>epinow</code> function across multiple regions in an efficient manner.</p>
<p>Define cases in multiple regions delineated by the region variable.</p>
<div class="sourceCode" id="cb11"><pre class="r"><span class="no">reported_cases</span> <span class="kw">&lt;-</span> <span class="kw pkg">data.table</span><span class="kw ns">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/rbindlist.html">rbindlist</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
   <span class="kw pkg">data.table</span><span class="kw ns">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span>(<span class="no">reported_cases</span>)[, <span class="no">region</span> <span class="kw">:=</span> <span class="st">"testland"</span>],
   <span class="no">reported_cases</span>[, <span class="no">region</span> <span class="kw">:=</span> <span class="st">"realland"</span>]))

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">reported_cases</span>)
<span class="co">#&gt;          date confirm   region</span>
<span class="co">#&gt; 1: 2020-02-22      14 testland</span>
<span class="co">#&gt; 2: 2020-02-23      62 testland</span>
<span class="co">#&gt; 3: 2020-02-24      53 testland</span>
<span class="co">#&gt; 4: 2020-02-25      97 testland</span>
<span class="co">#&gt; 5: 2020-02-26      93 testland</span>
<span class="co">#&gt; 6: 2020-02-27      78 testland</span></pre></div>
<p>Run the pipeline on each region in turn. The commented code (requires the <code>{future}</code> package) can be used to run regions in parallel.</p>
<div class="sourceCode" id="cb12"><pre class="r"><span class="co">## future::plan("multisession")</span>
<span class="no">estimates</span> <span class="kw">&lt;-</span> <span class="kw pkg">EpiNow2</span><span class="kw ns">::</span><span class="fu"><a href="reference/regional_epinow.html">regional_epinow</a></span>(<span class="kw">reported_cases</span> <span class="kw">=</span> <span class="no">reported_cases</span>,
                                      <span class="kw">generation_time</span> <span class="kw">=</span> <span class="no">generation_time</span>,
                                      <span class="kw">incubation_period</span> <span class="kw">=</span> <span class="no">incubation_period</span>,
                                      <span class="kw">reporting_delay</span> <span class="kw">=</span> <span class="no">reporting_delay</span>,
                                      <span class="kw">rt_prior</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">mean</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">sd</span> <span class="kw">=</span> <span class="fl">1</span>), <span class="kw">horizon</span> <span class="kw">=</span> <span class="fl">7</span>,
                                      <span class="kw">samples</span> <span class="kw">=</span> <span class="fl">2000</span>, <span class="kw">warmup</span> <span class="kw">=</span> <span class="fl">500</span>, <span class="kw">cores</span> <span class="kw">=</span> <span class="fl">4</span>,
                                      <span class="kw">chains</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p>If the results have been saved to a folder (using <code>target_folder</code>) then the <code>regional_summary</code> function can be used to produce summary output (<em>work in progress</em>).</p>
<p>An example of the summary output can be seen <a href="https://github.com/epiforecasts/covid-uk/tree/master/nowcast/regional-summary">here</a>.</p>
</div>
<div id="reporting-templates" class="section level3">
<h3 class="hasAnchor">
<a href="#reporting-templates" class="anchor"></a>Reporting templates</h3>
<p>Rmarkdown templates are provided in the package (<code>templates</code>) for semi-automated reporting of the estimates. These are currently undocumented but an example integration can be seen <a href="https://github.com/epiforecasts/covid/blob/master/_posts/national/united-kingdom/united-kingdom.Rmd">here</a>. If using these templates to report your results please highlight our <a href="https://epiforecasts.io/covid/">limitations</a> as these are key to understanding our results.</p>
</div>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>File an issue <a href="https://github.com/epiforecasts/EpiNow2/issues">here</a> if you have identified an issue with the package. Please note that due to operational constraints priority will be given to users informing government policy or offering methodological insights. We welcome all contributions, in particular those that improve the approach or the robustness of the code base.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sam Abbott <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8057-8037" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Joel Hellewell <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-2683-0849" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>James Munday <br><small class="roles"> Author </small>  </li>
<li>Robin Thompson <br><small class="roles"> Author </small>  </li>
<li>Sebastian Funk <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/epiforecasts/EpiNow2/actions"><img src="https://github.com/epiforecasts/EpiNow2/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/epiforecasts/EpiNow2?branch=master"><img src="https://codecov.io/gh/epiforecasts/EpiNow2/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/247464257"><img src="https://zenodo.org/badge/247464257.svg" alt="DOI"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Sam Abbott, Joel Hellewell, James Munday, Robin Thompson, Sebastian Funk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
